## 浮点数

1. decimal(m, d)
    - m 是精度，表示总共的位数 -> 例如 `create table t(a decimal(3, 1))` 表示位数不超过 3。
    - d 是标度，表示小数的位数。

2. float 和 double 在进行四舍五入时不会给出警告，但是 decimal 被截断时会有警告。

3. 在 mysql 中，定点数以字符串形式存储，精度要求高的时候（货币，科学数据）使用 decimal 类型比较好。使用浮点数时，尽量避免做浮点数比较。


## 日期和时间类型

### year

1. year 类型的范围为 `1901-2155`。

2. 以2位数字表示的 YEAR，范围为 1～99。1～69 和 70～99 范围的值分别被转换为 2001～2069 和 1970～1999 范围的 YEAR 值。

3. 数字 0 转换为 0000，字符串 '0' 和 '00' 转换为 2000。


### time

1. 格式为 'HH:MM:SS'。其中，HH表示小时，MM表示分钟，SS表示秒。TIME类型的取值范围为-838:59:59 ～838:59:59。

2. 'D HH:MM:SS' 格式的字符串。可以使用下面任何一种“非严格”的语法：'HH:MM:SS'、'HH:MM'、'D HH:MM'、'D HH' 或 'SS'。这里的 D 表示日，可以取 0~34 之间的值。在插入数据库时，D 被转换为小时保存，格式为 'D*24+HH'。

3. '11:12' 表示11:12:00，不带冒号的 '1112' 和1112表示 '00:11:12'。

4. 在使用 'D HH' 格式时，小时一定要使用双位数值，如果是小于 10 的小时数，应在前面加 0。

#### date

1. DATE 类型用在仅需要日期值时，没有时间部分，在存储时需要3字节。日期格式为 'YYYY-MM-DD'。其中，YYYY 表示年，MM 表示月，DD 表示日。



#### notice

TIMESTAMP 与 DATETIME 除了存储字节和支持的范围不同外，还有一个最大的区别就是：DATETIME 在存储日期数据时，按实际输入的格式存储，即输入什么就存储什么，与时区无关；而TIMESTAMP 值的存储是以 UTC（世界标准时间）格式保存的，存储时对当前时区进行转换，检索时再转换回当前时区。查询时，不同时区显示的时间值是不同的


## 文本字符串类型

### varchar 空格的保留
```sql
create table tmp(ch char(4), varchar(4));
insert into tmp values('ab  ', 'ab  ');
select concat('(', ch,')'), concat('(', vch,')') from tmp;

-- 结果
-- (ab), (ab  )
```

### text 类型

text 列保存非二进制字符串，如文章内容、评论等。当保存或查询 text 列的值时，不删除尾部空格。

1. enum 类型

ENUM 类型的字段在取值时，只能在指定的枚举列表中取，而且一次只能取一个。创建的成员中有空格时，其尾部的空格将自动被删除。ENUM值在内部用整数表示，并且每个枚举值均有一个索引值：列表值所允许的成员值从1开始编号，MySQL 存储的就是这个索引编号。枚举最多可以有 65535 个元素。

```sql
create table tmp(enm ENUM('first', 'second', 'third'));
insert into tmp values('first'), ('second'), ('third'), (null);
select enm, enm+0 from tmp;
```

ENUM 列总有一个默认值：如果将 ENUM 列声明为 NULL，NULL 值则为该列的一个有效值，并且默认值为 NULL；如果ENUM列被声明为 NOT NULL，其默认值为允许的值列表的第1个元素。

2. set 类型
与ENUM类型相同，SET值在内部用整数表示，列表中每一个值都有一个索引编号。当创建表时，SET成员值的尾部空格将自动被删除。与ENUM类型不同的是，ENUM类型的字段只能从定义的列值中选择一个值插入，而SET类型的列可从定义的列值中选择多个字符的联合。如果插入SET字段中列值有重复，则MySQL自动删除重复的值；插入SET字段的值的顺序并不重要，MySQL会在存入数据库时按照定义的顺序显示；如果插入了不正确的值，默认情况下，MySQL将忽视这些值，并给出警告。


### 如何选择数据类型

1. 整数和浮点数

如果不需要小数部分，就使用整数来保存数据；如果需要表示小数部分，就使用浮点数类型。对于浮点数据列，存入的数值会对该列定义的小数位进行四舍五入。例如，假设列的值的范围为1~99999，若使用整数，则 MEDIUMINT UNSIGNED 是最好的类型；若需要存储小数，则使用FLOAT类型。浮点类型包括FLOAT和DOUBLE类型。DOUBLE类型精度比FLOAT类型高，因此要求存储精度较高时应选择DOUBLE类型。

2. 浮点数和定点数

浮点数FLOAT、DOUBLE相对于定点数DECIMAL的优势是：在长度一定的情况下，浮点数能表示更大的数据范围。由于浮点数容易产生误差，因此对精确度要求比较高时，建议使用DECIMAL来存储。DECIMAL在MySQL中是以字符串存储的，用于定义货币等对精确度要求较高的数据。在数据迁移中，float(M,D)是非标准SQL定义，数据库迁移可能会出现问题，最好不要这样使用。另外，两个浮点数进行减法和比较运算时也容易出问题，因此在进行计算的时候，一定要小心。进行数值比较时，最好使用DECIMAL类型.

3. 日期和时间类型

MySQL对于不同种类的日期和时间有很多数据类型，比如YEAR和TIME。如果只需要记录年份，则使用YEAR类型即可；如果只记录时间，则使用TIME类型。如果同时需要记录日期和时间，则可以使用TIMESTAMP或者DATETIME类型。由于TIMESTAMP列的取值范围小于DATETIME的取值范围，因此存储范围较大的日期最好使用DATETIME。TIMESTAMP也有一个DATETIME不具备的属性。默认的情况下，当插入一条记录但并没有指定TIMESTAMP这个列值时，MySQL会把TIMESTAMP列设为当前的时间。因此当需要插入记录的同时插入当前时间时，使用TIMESTAMP是方便的。另外，TIMESTAMP在空间上比DATETIME更有效

4. char 与 varchar 之间的特点与选择

CHAR和VARCHAR的区别如下：
  - CHAR是固定长度字符，VARCHAR是可变长度字符。
  - CHAR会自动删除插入数据的尾部空格，VARCHAR不会删除尾部空格。

CHAR是固定长度，所以它的处理速度比VARCHAR的速度要快，但是它的缺点是浪费存储空间，所以对存储不大但在速度上有要求的可以使用CHAR类型，反之可以使用VARCHAR类型来实现。存储引擎对于选择CHAR和VARCHAR的影响：
  - 对于MyISAM存储引擎：最好使用固定长度的数据列代替可变长度的数据列。这样可以使整个表静态化，从而使数据检索更快，用空间换时间。
  - 对于InnoDB存储引擎：使用可变长度的数据列，因为InnoDB数据表的存储格式不分固定长度和可变长度，因此使用CHAR不一定比使用VARCHAR更好，但由于VARCHAR是按照实际的长度存储的，比较节省空间，所以对磁盘I/O和数据存储总量比较好。

5. ENUM 和 SET

ENUM只能取单值，它的数据列表是一个枚举集合。它的合法取值列表最多允许有65535个成员。因此，在需要从多个值中选取一个时，可以使用ENUM。比如：性别字段适合定义为ENUM类型，每次只能从‘男’或‘女’中取一个值。

SET可取多值。它的合法取值列表最多允许有64个成员。空字符串也是一个合法的SET值。在需要取多个值的时候，适合使用SET类型，比如要存储一个人的兴趣爱好，最好使用SET类型。

ENUM和SET的值是以字符串形式出现的，但在内部，MySQL是以数值的形式存储它们的。

6. BLOB 和 TEXT

BLOB是二进制字符串，TEXT是非二进制字符串，两者均可存放大容量的信息。BLOB主要存储图片、音频信息等，而TEXT只能存储纯文本文件。